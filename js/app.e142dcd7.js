(function(){"use strict";var e={7976:function(e,i,a){var t=a(9242),n=a(3396);const s={class:"w-100 p-1"};function r(e,i,a,t,r,o){const l=(0,n.up)("SelfieCamera");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(l)])}var o=a(7139);const l=e=>((0,n.dD)("data-v-46c836ac"),e=e(),(0,n.Cn)(),e),d={class:"card p-1",style:{"max-width":"500px"}},c={key:0,class:"p-2"},h=l((()=>(0,n._)("p",{style:{"text-align":"left"}},[(0,n.Uk)(" Um beim JðŸŒ° Memory-Spiel mitbachen zu kÃ¶nnen brauchen wir ein Bild und deinen Namen."),(0,n._)("br"),(0,n._)("br"),(0,n.Uk)(" Dazu musst du nur die Kamera deines Handys aktivieren, oder ein Bild hochladen. Deinen Vor- und Nachnamen eingeben und abschicken."),(0,n._)("br"),(0,n.Uk)(" Dann ist dein Bild auch im nÃ¤chsten Memory mit dabei. ")],-1))),m=[h],p={key:1,class:"camera-button mt-2 mb-2 p-2"},u={key:0},g={key:1},f={key:2,class:"mb-2 p-2"},v={key:3},b={id:"imageFinished",ref:"canvas2",width:300,height:300},y={id:"videobox",class:"p-2"},k={ref:"camera",width:300,height:300,autoplay:""},w={id:"photoTaken",ref:"canvas",width:300,height:300},_={class:"camera-loading"},C={key:5,class:"camera-shoot mt-2 mb-2"},O=l((()=>(0,n._)("img",{src:"https://img.icons8.com/material-outlined/40/ffffff/camera--v2.png"},null,-1))),S=[O],F={key:6,class:"camera-upload p-2"},D={class:"mt-2 lowerform"},P={class:"input-group mb-3"},I=l((()=>(0,n._)("div",{class:"input-group-prepend w-25"},[(0,n._)("span",{class:"input-group-text",id:"basic-addon1"},"Vorname")],-1))),N={class:"mt-2 lowerform"},L={class:"input-group mb-3"},T=l((()=>(0,n._)("div",{class:"input-group-prepend w-25"},[(0,n._)("span",{class:"input-group-text",id:"basic-addon2"},"Nachname")],-1))),x={class:"mt-2 lowerform"},j={class:"input-group mb-3"},U=l((()=>(0,n._)("div",{class:"input-group-prepend w-25"},[(0,n._)("span",{class:"input-group-text",id:"basic-addon3"},"Stimmgruppe")],-1))),$=l((()=>(0,n._)("option",{value:"Sopran"},"Sopran",-1))),E=l((()=>(0,n._)("option",{value:"Alt"},"Alt",-1))),B=l((()=>(0,n._)("option",{value:"Tenor"},"Tenor",-1))),q=l((()=>(0,n._)("option",{value:"Bass"},"Bass",-1))),M=[$,E,B,q],V=["disabled"],G={key:0,class:"alert alert-success",role:"alert"},A={key:1,class:"alert alert-danger",role:"alert"};function z(e,i,a,s,r,l){const h=(0,n.up)("vue-avatar-editor");return(0,n.wg)(),(0,n.iD)("div",d,[r.isCameraOpen||r.isFileSelected||r.isImageLoaded?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",c,m)),r.isFileSelected||r.isImageLoaded?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",p,[(0,n._)("button",{class:(0,o.C_)(["btn btn-primary w-100",{"is-primary":!r.isCameraOpen,"is-danger":r.isCameraOpen}]),onClick:i[0]||(i[0]=(...e)=>l.toggleCamera&&l.toggleCamera(...e))},[r.isCameraOpen?((0,n.wg)(),(0,n.iD)("span",g,"Kamera schlieÃŸen")):((0,n.wg)(),(0,n.iD)("span",u,"Kamera Ã¶ffnen"))],2),(0,n._)("input",{id:"fileUpload",type:"file",onChange:i[1]||(i[1]=(...e)=>l.loadFile&&l.loadFile(...e)),accept:"image/jpeg, image/png",hidden:""},null,32),(0,n.wy)((0,n._)("button",{class:"btn mt-2 btn-primary w-100",onClick:i[2]||(i[2]=e=>l.chooseFile())}," Vorhandenes Bild hochladen ",512),[[t.F8,!r.isCameraOpen]])])),!r.isCameraOpen&&r.isImageFinished||r.isImageLoaded?((0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("button",{class:"btn mt-2 btn-primary w-100",onClick:i[3]||(i[3]=e=>l.restart())}," ZurÃ¼ck ")])):(0,n.kq)("",!0),r.isCameraOpen?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",v,[(0,n.wy)((0,n.Wm)(h,{width:300,height:300,ref:"vueavatar",finishText:"Bild zuschneiden",onSelectFile:i[4]||(i[4]=e=>l.onSelectFile(e)),onFinished:i[5]||(i[5]=e=>l.imageFinshed(e)),image:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Image_created_with_a_mobile_phone.png/800px-Image_created_with_a_mobile_phone.png"},null,512),[[t.F8,!r.isImageFinished&&r.isImageLoaded]]),(0,n.wy)((0,n._)("canvas",b,null,512),[[t.F8,r.isImageFinished]])])),r.isCameraOpen?(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{key:4,class:(0,o.C_)(["camera-box",{flash:r.isShotPhoto}])},[(0,n._)("div",{class:(0,o.C_)(["camera-shutter",{flash:r.isShotPhoto}])},null,2),(0,n._)("div",y,[(0,n.wy)((0,n._)("video",k,null,512),[[t.F8,!r.isPhotoTaken]]),(0,n.wy)((0,n._)("canvas",w,null,512),[[t.F8,r.isPhotoTaken]])])],2)),[[t.F8,!r.isLoading]]):(0,n.kq)("",!0),(0,n.wy)((0,n._)("div",_,null,512),[[t.F8,r.isCameraOpen&&r.isLoading]]),r.isCameraOpen&&!r.isLoading?((0,n.wg)(),(0,n.iD)("div",C,[(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:i[6]||(i[6]=(...e)=>l.takePhoto&&l.takePhoto(...e))},S)])):(0,n.kq)("",!0),r.isCameraOpen&&!r.isLoading||r.isImageFinished?((0,n.wg)(),(0,n.iD)("div",F,[(0,n._)("div",D,[(0,n._)("div",P,[I,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"Vorname","aria-label":"Vorname","aria-describedby":"basic-addon1","onUpdate:modelValue":i[7]||(i[7]=e=>r.vorName=e)},null,512),[[t.nr,r.vorName]])])]),(0,n._)("div",N,[(0,n._)("div",L,[T,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"Nachname","aria-label":"Nachname","aria-describedby":"basic-addon2","onUpdate:modelValue":i[8]||(i[8]=e=>r.nachName=e)},null,512),[[t.nr,r.nachName]])])]),(0,n._)("div",x,[(0,n._)("div",j,[U,(0,n.wy)((0,n._)("select",{type:"text",class:"form-control","aria-label":"Stimmgruppe","aria-describedby":"basic-addon3","onUpdate:modelValue":i[9]||(i[9]=e=>r.stimmGruppe=e)},M,512),[[t.bM,r.stimmGruppe]])])]),(0,n._)("button",{type:"submit",class:"btn btn-primary lowerform mb-3 w-100",onClick:i[10]||(i[10]=(...e)=>l.sendData&&l.sendData(...e)),disabled:r.isSendDisabled||!(r.isPhotoTaken&&r.isCameraOpen)&&!r.isImageFinished||0==r.vorName.length||0==r.nachName.length||0==r.stimmGruppe.length}," Abschicken ",8,V),r.isOk?((0,n.wg)(),(0,n.iD)("div",G," Daten erfolgreich hochgeladen. ")):(0,n.kq)("",!0),r.isError?((0,n.wg)(),(0,n.iD)("div",A," Probleme beim Upload. Bitte nochmal probieren. ")):(0,n.kq)("",!0)])):(0,n.kq)("",!0)])}var R=a(5959),K={components:{VueAvatarEditor:R.Yc},data(){return{isCameraOpen:!1,isPhotoTaken:!1,isShotPhoto:!1,isLoading:!1,isFileSelected:!1,isImageLoaded:!1,isImageFinished:!1,isOk:!1,isError:!1,isSendDisabled:!1,vorName:"",nachName:"",stimmGruppe:"",link:"#",rotation:0,scale:1,imageBlob:void 0}},methods:{chooseFile(){document.getElementById("fileUpload").click()},restart(){this.isCameraOpen=!1,this.isPhotoTaken=!1,this.isShotPhoto=!1,this.isLoading=!1,this.isFileSelected=!1,this.isImageLoaded=!1,this.isImageFinished=!1},loadFile(e){const i=e.target.files[0],a=new FileReader;a.readAsDataURL(i),a.onload=e=>{this.$refs.vueavatar.$el.classList.add("p-2");const i=this.$refs.vueavatar.$el.children,a=i[i.length-1];a.classList.add("btn","btn-primary","w-100","mb-1"),console.log(a),this.isImageLoaded=!0,this.$refs.vueavatar.$refs.vueavatar.loadImage(e.target.result)}},imageFinshed(e){this.isImageFinished=!0;let i=this.$refs.canvas2;i.getContext("2d").drawImage(e,0,0),this.isSendDisabled=!1,this.vorName="",this.nachName="",this.stimmGruppe="",this.isOk=!1,this.isError=!1},onSelectFile(){this.isFileSelected=!0},toggleCamera(){this.isCameraOpen?(this.isCameraOpen=!1,this.isPhotoTaken=!1,this.isShotPhoto=!1,this.stopCameraStream()):(this.isCameraOpen=!0,this.createCameraElement())},createCameraElement(){this.isLoading=!0;const e=window.constraints={audio:!1,video:{width:300,height:300,facingMode:"user"}};navigator.mediaDevices.getUserMedia(e).then((e=>{this.isLoading=!1,this.$refs.camera.srcObject=e})).catch((e=>{this.isLoading=!1,alert("May the browser didn't support or there is some errors."),console.log(e)}))},stopCameraStream(){let e=this.$refs.camera.srcObject.getTracks();e.forEach((e=>{e.stop()}))},takePhoto(){if(this.isPhotoTaken)this.vorName="",this.nachName="",this.stimmGruppe="";else{this.isShotPhoto=!0;const e=50;setTimeout((()=>{this.isShotPhoto=!1}),e)}this.isPhotoTaken=!this.isPhotoTaken;let e=this.$refs.canvas,i=this.$refs.camera;e.width=i.videoWidth,e.height=i.videoHeight,e.getContext("2d").drawImage(i,0,0),this.isSendDisabled=!1,this.isOk=!1,this.isError=!1},async internalSendData(e){try{const i=await fetch("https://jazznuts.krueckl.de/memory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return i.ok}catch{return!1}},sendData(){if(this.isSendDisabled=!0,0==this.vorName.length||0==this.nachName.length||0==this.stimmGruppe.length)return this.isOk=!1,void(this.isError=!0);let e={first:this.vorName,last:this.nachName,voice:this.stimmGruppe};this.isImageFinished?e["img"]=this.$refs.canvas2.toDataURL():e["img"]=this.$refs.canvas.toDataURL(),this.internalSendData(e).then((e=>{this.isOk=e,this.isError=!e}))}}},W=a(89);const Z=(0,W.Z)(K,[["render",z],["__scopeId","data-v-46c836ac"]]);var H=Z,J={name:"App",components:{SelfieCamera:H}};const Y=(0,W.Z)(J,[["render",r]]);var Q=Y;a(2166);(0,t.ri)(Q).mount("#app")}},i={};function a(t){var n=i[t];if(void 0!==n)return n.exports;var s=i[t]={exports:{}};return e[t](s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(i,t,n,s){if(!t){var r=1/0;for(c=0;c<e.length;c++){t=e[c][0],n=e[c][1],s=e[c][2];for(var o=!0,l=0;l<t.length;l++)(!1&s||r>=s)&&Object.keys(a.O).every((function(e){return a.O[e](t[l])}))?t.splice(l--,1):(o=!1,s<r&&(r=s));if(o){e.splice(c--,1);var d=n();void 0!==d&&(i=d)}}return i}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[t,n,s]}}(),function(){a.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(i,{a:i}),i}}(),function(){a.d=function(e,i){for(var t in i)a.o(i,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:i[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(i){return 0===e[i]};var i=function(i,t){var n,s,r=t[0],o=t[1],l=t[2],d=0;if(r.some((function(i){return 0!==e[i]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var c=l(a)}for(i&&i(t);d<r.length;d++)s=r[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},t=self["webpackChunkj_nuts_memory_join"]=self["webpackChunkj_nuts_memory_join"]||[];t.forEach(i.bind(null,0)),t.push=i.bind(null,t.push.bind(t))}();var t=a.O(void 0,[998],(function(){return a(7976)}));t=a.O(t)})();
//# sourceMappingURL=app.e142dcd7.js.map